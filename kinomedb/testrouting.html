<!DOCTYPE html>
<html lang="en">
<head>
  <base href="http://choderalab.github.io/kinome-data/kinomedb/">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="shortcut icon" href="images/favicon.ico" type="image/ico">

  <title>kinomeDB - choderalab</title>

  <link href="css/style.default.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="js/html5shiv.js"></script>
  <script src="js/respond.min.js"></script>
  <![endif]-->
</head>

<body>

<!-- Preloader -->
<!-- <div id="preloader"> -->
<!--     <div id="status"><i class="fa fa&#45;spinner fa&#45;spin"></i></div> -->
<!-- </div> -->

<section>
  
  <div class="leftpanel">
    
    <div class="logopanel">
        <h1><span>[</span> kinomeDB <span>]</span></h1>
    </div><!-- logopanel -->
    
    <div class="leftpanelinner">
        
      <h5 class="sidebartitle">Navigation</h5>
      <ul class="nav nav-pills nav-stacked nav-bracket">
        <li><a href="index.html"><i class="fa fa-home"></i> <span>Home</span></a></li>
        <li class="nav-parent"><a href="../kinase_constructs-sgc_and_hip.html"><i class="fa fa-sort-amount-asc"></i> <span>Expression constructs</span></a>
          <ul class="children">
            <li><a href="../kinase_constructs-sgc_and_hip.html"><i class="fa fa-caret-right"></i>Custom selection</a></li>
            <li><a href="../kinase_constructs-sgc_and_hip-unfiltered.html"><i class="fa fa-caret-right"></i>All data</a></li>
          </ul>
        </li>
      </ul>
      
    </div><!-- leftpanelinner -->
  </div><!-- leftpanel -->
  
  <div class="mainpanel">
    
    <div class="headerbar">
      
      <a class="menutoggle"><i class="fa fa-bars"></i></a>
      
      <form class="searchform" action="index.html" method="post">
        <input type="text" class="form-control" name="keyword" placeholder="Search here..." />
      </form>
      
      <div class="header-right">
        <ul class="headermenu">
          <li class="btn-group">
            <button type="button" class="btn btn-default static">
              <img src="images/choderalab-logo-26x26.png" alt="" />
                <a target="_blank" href="http://www.choderalab.org">choderalab.org</a>
            </button>
          </li>
        </ul>
      </div><!-- header-right -->
      
    </div><!-- headerbar -->
        
    <div class="pageheader">
      <h2><i class="fa fa-crosshairs"></i><kovar data-bind="text: dbtarget.entry_name"> Target protein </kovar><span data-bind="text: dbtarget.ac"></span></h2>
    </div>
    
    <div class="contentpanel">
      <!-- content goes here... -->

      <div class="btn-group">
      <a class="btn btn-primary" href="testrouting.html/push/P12931">src</a>
      <a class="btn btn-primary" href="testrouting.html/push/P00519">abl1</a>
      <a class="btn btn-primary" href="testrouting.html/push/P00533">egfr</a>
      </div>

      <div class="panel panel-default">
        <div class="panel-heading">
          <h4 class="panel-title">UniProt</h4>
        </div><!-- panel-heading -->
        <div class="panel-body">
          <ul>
            <li>accession code (AC): <span data-bind="text: dbtarget.ac"></span></li>
            <li>entry_name: <span data-bind="text: dbtarget.entry_name"></span></li>
            <li>family: <span data-bind="text: dbtarget.family"></span></li>
            </div>
          </ul>
        </div><!-- panel-body -->
      </div><!-- panel -->

    </div>
    
  </div><!-- mainpanel -->
  
</section>



<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jquery-migrate-1.2.1.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/modernizr.min.js"></script>
<script src="js/jquery.sparkline.min.js"></script>
<script src="js/toggles.min.js"></script>
<script src="js/retina.min.js"></script>
<script src="js/jquery.cookies.js"></script>
<script src="js/knockout-3.1.0.js"></script>
<script src="js/sammy-latest.min.js"></script>

<script src="js/custom.js"></script>

<script type="text/javascript">
    function targetModel(context) {
        var self = this;
        self.ac = ko.observable(context.ac);
        self.entry_name = ko.observable(context.entry_name);
        self.family = ko.observable(context.family);

        self.updatedata = function(data) {
            self.ac(data.ac);
            self.entry_name(data.entry_name);
            self.family(data.family);
        };
    }

    function targetViewModel() {
        var self = this;
        self.dbURI = 'http://ec2-54-227-62-182.compute-1.amazonaws.com';
        null_targetdata = {"ac":"", "entry_name":"", "family":""};
        self.dbtarget = new targetModel(null_targetdata);

        self.ajax = function(uri, method, data) {
            var request = {
                url: uri,
                type: method,
                contentType: "application/json",
                accepts: "application/json",
                cache: false,
                dataType: 'json',
                data: JSON.stringify(data),
                error: function(jqXHR) {
                    console.log("ajax error " + jqXHR.status);
                }
            };
            return $.ajax(request);
        };

        // Update the target AC URL hash
        self.goToTarget = function (target_ac) { location.hash = target_ac };

        self.currentTargetAC = ko.observable();

        // Client-side routes    
        Sammy(function () {
            this.get('/push/:target_ac', function () {
                self.currentTargetAC(this.params.target_ac);
                self.ajax(self.dbURI + "/" + self.currentTargetAC(), 'GET').done(function(data) {
                    self.dbtarget.updatedata(data);
                });
            });

        }).run();

    }

    var tvm = new targetViewModel();
    ko.applyBindings(tvm);

</script>

</body>
</html>
